#!/bin/bash

set -ex

REMOTE="scionproto"

echo "Tag: ${1:-}"

# Tag local apps and push to remote
for app in border dispatcher sig beacon cert path sciond; do
    docker tag "scion_$app:latest" "$REMOTE/$app:latest"
    docker tag "scion_$app:latest" "$REMOTE/$app:$1"
    docker tag "scion_$app:debug" "$REMOTE/${app}_debug:$1"
    docker push "$REMOTE/$app:latest"
    docker push "$REMOTE/$app:$1"
    docker push "$REMOTE/${app}_debug:$1"
done
