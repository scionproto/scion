#!/bin/bash

set -e

TESTS="revocation go_integration e2e_noncore_core_integration e2e_noncore_noncore_integration e2e_core_integration e2e_upstream_integration"

run_test() {
    echo "- label: Integration - ${1:?}"
    echo "  command:"
    echo "  - $BASE/run_step integration $1"
    echo "  timeout_in_minutes: 10"
    echo "  artifact_paths:"
    echo "  - \"artifacts.out/**/*\""
}

if [ "$RUN_ALL_TESTS" = "y" ]; then
    run_test "py_ext_integration"
    run_test "py_scmp_integration"
fi

for test in $TESTS; do
    run_test "$test"
done
