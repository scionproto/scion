machine:
  python:
    version: 3.4.2

dependencies:
  cache_directories:
    - "/var/cache/apt"
  post:
    - "./scion.sh init"
    - "./scion.sh topology"

test:
  override:
    - ./scion.sh coverage
    - ./supervisor/supervisor.sh status
    - make -C sphinx-doc html
  post:
    - cp -a htmlcov "$CIRCLE_ARTIFACTS"/coverage
    - cp -a sphinx-doc/_build/html "$CIRCLE_ARTIFACTS"/docs
